<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KLM Pro â€¢ Kajian Kitab</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:Poppins,sans-serif;
    background:#0f2027;
    color:#fff;
}
header{
    padding:16px;
    text-align:center;
    font-weight:700;
    font-size:1.2rem;
    background:linear-gradient(135deg,#00ffd5,#007777);
    color:#000;
}
section{
    display:none;
    padding:16px;
}
section.active{display:block}
.card{
    background:rgba(255,255,255,.1);
    border-radius:16px;
    padding:14px;
    margin-bottom:12px;
}
select,button{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:none;
    margin-top:8px;
    font-family:Poppins;
}
button{
    background:#00ffd5;
    font-weight:600;
}
.nav{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    display:flex;
    background:#000;
}
.nav button{
    flex:1;
    background:none;
    color:#fff;
    padding:10px 0;
}
.nav button.active{
    color:#00ffd5;
}
.small{
    font-size:.85rem;
    opacity:.8;
}
</style>
</head>

<body>

<header>ðŸ“š Kajian Kitab KLM Pro</header>

<!-- ===== SHOLAT ===== -->
<section id="sholat" class="active">
<div class="card">
<h3>ðŸ•Œ Jadwal Sholat</h3>
<div id="jadwal">Memuat...</div>
</div>
</section>

<!-- ===== QURAN ===== -->
<section id="quran">
<div class="card">
<h3>ðŸ“– Al-Qur'an</h3>
<select id="surah"></select>
<div id="ayat"></div>
</div>
</section>

<!-- ===== HADIS ===== -->
<section id="hadis">
<div class="card">
<h3>ðŸ“œ Kitab Hadis</h3>
<select id="kitab">
<option value="bukhari">Shahih Bukhari</option>
<option value="muslim">Shahih Muslim</option>
<option value="tirmidzi">Tirmidzi</option>
<option value="abu-daud">Abu Daud</option>
<option value="nasai">An-Nasa'i</option>
<option value="ibnu-majah">Ibnu Majah</option>
</select>
<button onclick="loadHadis()">Muat Hadis</button>
<div id="hadisList" class="small"></div>
</div>
</section>

<!-- ===== TAFSIR ===== -->
<section id="tafsir">
<div class="card">
<h3>ðŸ“š Tafsir Qur'an</h3>
<p class="small">Tafsir akan tampil otomatis saat ayat dipilih</p>
<div id="tafsirBox"></div>
</div>
</section>

<!-- ===== NAV ===== -->
<div class="nav">
<button class="active" onclick="show('sholat',this)">ðŸ•Œ</button>
<button onclick="show('quran',this)">ðŸ“–</button>
<button onclick="show('hadis',this)">ðŸ“œ</button>
<button onclick="show('tafsir',this)">ðŸ“š</button>
</div>

<script>
function show(id,el){
    document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));
    el.classList.add("active");
}

/* ===== SHOLAT ===== */
fetch("https://api.aladhan.com/v1/timingsByCity?city=Jakarta&country=Indonesia&method=11")
.then(r=>r.json())
.then(d=>{
    let t=d.data.timings;
    jadwal.innerHTML=`
    Subuh: ${t.Fajr}<br>
    Dzuhur: ${t.Dhuhr}<br>
    Ashar: ${t.Asr}<br>
    Maghrib: ${t.Maghrib}<br>
    Isya: ${t.Isha}`;
})
.catch(()=>jadwal.innerHTML="Gagal memuat jadwal");

/* ===== QURAN ===== */
fetch("https://api.alquran.cloud/v1/surah")
.then(r=>r.json())
.then(d=>{
    d.data.forEach(s=>{
        surah.innerHTML+=`<option value="${s.number}">${s.name}</option>`;
    });
});

surah.onchange=()=>{
fetch(`https://api.alquran.cloud/v1/surah/${surah.value}/id.indonesian`)
.then(r=>r.json())
.then(d=>{
    ayat.innerHTML="";
    d.data.ayahs.forEach(a=>{
        ayat.innerHTML+=`<p>${a.numberInSurah}. ${a.text}</p>`;
        loadTafsir(a.numberInSurah);
    });
});
}

/* ===== HADIS ===== */
function loadHadis(){
    hadisList.innerHTML="Memuat hadis...";
    let k=kitab.value;
    fetch(`https://hadis-api-id.vercel.app/hadith/${k}?page=1&limit=5`)
    .then(r=>r.json())
    .then(d=>{
        hadisList.innerHTML="";
        d.items.forEach(h=>{
            hadisList.innerHTML+=`<p>${h.number}. ${h.arab}</p>`;
        });
    })
    .catch(()=>hadisList.innerHTML="Gagal memuat hadis");
}

/* ===== TAFSIR ===== */
function loadTafsir(ayat){
fetch(`https://quranenc.com/api/v1/translation/aya/indonesian_sabiq/1/${ayat}`)
.then(r=>r.json())
.then(d=>{
    tafsirBox.innerHTML=d.result.translation;
})
.catch(()=>tafsirBox.innerHTML="Tafsir tidak tersedia");
}
</script>

</body>
</html>
